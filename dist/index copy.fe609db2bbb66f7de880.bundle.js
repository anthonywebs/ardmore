(()=>{let e;const t=()=>{document.getElementById("js-audio").play(),document.getElementById("js-play-text").classList.add("hidden"),document.getElementById("js-play").classList.add("hidden"),document.getElementById("js-top-play").classList.add("hidden"),document.getElementById("js-top-visualizer").classList.remove("hidden"),document.getElementById("js-pause").classList.remove("hidden"),document.getElementById("js-ff").classList.remove("hidden"),e||(e=(()=>{const e=document.getElementById("js-visualizer"),t=e.getContext("2d");e.width=e.offsetWidth,e.height=e.offsetHeight;const n=e.width<540,o=document.getElementById("js-top-visualizer"),s=o.getContext("2d");o.width=o.offsetWidth,o.height=o.width;const d=new(window.AudioContext||window.webkitAudioContext),i=d.createAnalyser(),l=document.getElementById("js-audio");d.createMediaElementSource(l).connect(i),i.connect(d.destination),i.fftSize=256;const c=i.frequencyBinCount-38,a=new Uint8Array(c);let r=ArrayBuffer[0];const m="Anthony";t.font="192px SF_Pro_Display_Black";const y=t.measureText(m).width,u=(n?.95:.85)*(e.width>1e3?1e3:e.width)/y,g=192*u,h=(e.width-y*u)/u/2;let I=25;const p=document.getElementById("js-vynil"),E=o.width/2,f=o.height/2,B=n?25:45,j=n?.2:.3,v=c/30,S=()=>{if(l.paused)return;i.getByteFrequencyData(a),p.style.transform=`rotate(${I}deg)`;let d=a[0]/64;d=d>1?1.5:d,I+=d,I>=360&&(I=0);{t.clearRect(0,0,e.width,e.height),s.clearRect(0,0,o.width,o.height);let d=0;n&&(d=-300),t.fillStyle="#000",t.fillRect(0,0,e.width,e.height),s.strokeStyle="#ff5a00",s.lineWidth=n?5:7,s.lineJoin="round",s.beginPath(),s.arc(E,f,B,0,2*Math.PI),s.stroke(),s.closePath(),s.clip(),s.lineWidth=5;let i=-1;s.beginPath(),s.moveTo(0,f);for(let e=0;e<c;e++){if(e>0&&e%v==0){let t=a[e];t=t>64?t-64:0;const n=t*j*i;i*=-1,s.lineTo(0+o.width*e/c,f-n)}const n=a[e]/128*g*.5,l=9,m=(n-r)/l;for(let e=0;e<l;e++)t.beginPath(),t.lineWidth=1,t.strokeStyle="rgb(255,255,255,0.6)",t.moveTo(d+3*e,g),t.lineTo(d+3*e,0),t.stroke(),t.closePath(),t.beginPath(),t.lineWidth=4,t.moveTo(d+3*e,g),t.lineTo(d+3*e,g-(r+e*m)),t.strokeStyle="#fff",t.stroke(),t.closePath();r=n,d+=27}s.stroke(),s.closePath(),t.save(),t.scale(u,u),t.globalCompositeOperation="destination-in",t.fillText(m,h,150),t.globalCompositeOperation="source-over",t.restore()}requestAnimationFrame(S)};return S})()),e()},n=()=>{const e=document.getElementById("js-audio");++SONG_TRACK===SONG_LIST.length&&(SONG_TRACK=0),e.src=SONG_LIST[SONG_TRACK].path,e.play()},o=()=>{document.getElementById("js-audio").pause(),document.getElementById("js-play-text").classList.remove("hidden"),document.getElementById("js-pause").classList.add("hidden"),document.getElementById("js-ff").classList.add("hidden"),document.getElementById("js-top-visualizer").classList.add("hidden"),document.getElementById("js-top-play").classList.remove("hidden"),document.getElementById("js-play").classList.remove("hidden")},s=()=>{document.getElementById("js-audio").paused?t():o()},d=(e,t,n=.2,o=.2)=>{let s=0;const d=e.getBoundingClientRect().top;d>0&&d<t&&(d>t*(1-n-o)&&d<t*(1-n)?s=(t*(1-n)-d)/t/o:d>t*n/2&&d<t*(n/2+o)?s=1-(t*(n/2+o)-d)/t/o:d>=t*(n/2+o)&&d<=t*(1-n-o)&&(s=1),e.style.opacity=s)},i=(e,t,n,o=.5,s=1,d=.1,i=1)=>{let l=0;const c=e.getBoundingClientRect().top,a=.5*n,r=n*o,m=n*(o-s),y=s*d,u=n*y,g=r-n*y,h=m+n*y;c>m-a&&c<r+a&&(c>g&&c<r?l=(r-c)/u:c>m&&c<h?l=(c-m)/u:c>=h&&c<=g&&(l=1),t.style.opacity=l*i)},l=()=>{const e=document.getElementById("js-links-wr");e.scrollIntoView(),e.style.opacity=1,document.getElementById("js-intro").style.opacity=0},c=async e=>{e.preventDefault();const t=document.getElementById("js-contact-form"),n=new FormData(e.target);try{const e=await fetch(event.target.action,{method:"POST",body:n,headers:{Accept:"application/json"}});e.ok?(t.reset(),showNotice(!0)):e.json().then((e=>{showNotice(!1),console.error("Server error",e)}))}catch(e){showNotice(!1),console.error("Unknown error",e)}};(async()=>{await loadFont(),(()=>{SONG_LIST=[SONG_LIST[0],...(e=>{for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e})(SONG_LIST.slice(1))];const e=document.getElementById("js-audio"),t=localStorage.getItem("visitCount");let n=t?parseInt(t,10):0;n<1?e.src="./media/intro_voicebooking.m4a":n<2?(SONG_TRACK++,e.src=SONG_LIST[SONG_TRACK].path):(SONG_LIST.sort(((e,t)=>Math.random()-.5)),SONG_TRACK++,e.src=SONG_LIST[SONG_TRACK].path,n>=5&&(n=-1)),localStorage.setItem("visitCount",n+1)})(),(()=>{const e=document.getElementById("js-body-wr"),t=e.offsetWidth,n=e.offsetHeight,o=document.getElementById("js-body-inner"),s=document.getElementById("js-intro"),l=s.offsetWidth,c=t<540;let a=t*(t>600?.75:.8);t>1200&&(a=960);const r=a/l;let m=r;s.style.transform=`translate(-50%, -50%) matrix(${m}, 0, 0, ${m}, 0, 0)`;const y=document.getElementById("js-vynil-wr");document.getElementById("js-vynil").style.transform="rotate(25deg)",(async()=>{const e=document.getElementById("js-visualizer"),t=e.getContext("2d");e.width=e.offsetWidth,e.height=e.offsetHeight;const n="Anthony";t.font="192px SF_Pro_Display_Black";const o=t.measureText(n).width,s=(e.width<600?.95:.85)*(e.width>1e3?1e3:e.width)/o,d=192*s,i=(e.width-o*s)/s/2;t.lineWidth=1,t.strokeStyle="rgb(255,255,255,0.6";for(let n=0;n<e.width;n+=3)t.beginPath(),t.moveTo(n,d),t.lineTo(n,0),t.stroke(),t.closePath();t.save(),t.scale(s,s),t.globalCompositeOperation="destination-in",t.fillText(n,i,150),t.globalCompositeOperation="source-over",t.restore()})();const u=document.getElementById("js-photo"),g=document.getElementById("js-white"),h=document.getElementById("js-links-wr"),I=document.getElementById("js-music-section"),p=document.getElementById("js-code");let E=t*(t>600?.8:.9);t>1400&&(E=1200);const f=E/p.offsetWidth;p.style.transform=`translate(-50%, -50%) matrix(${f}, 0, 0, ${f}, 0, 0)`;const B=document.getElementById("js-top-audio"),j=document.getElementById("js-1"),v=document.getElementById("js-2"),S=document.getElementById("js-3");e.addEventListener("scroll",(()=>{const e=y.getBoundingClientRect().top,t=o.getBoundingClientRect().top,l=h.getBoundingClientRect().top,a=1+(t>0?0:-t);if(m=r+r*a*48/n,a<1.5*n){s.style.opacity=1;let e=0;a>n&&(e=(a-n)/n*2,e>.9&&(e=1),e<0&&(e=0)),s.style.backgroundColor=`rgb(0, 0, 0, ${e})`,s.style.transform=`translate(-50%, -50%) matrix(${m}, 0, 0, ${m}, 0, 0)`}const E=c?.3:.2;if(d(j,n,E,.2),d(v,n,E,.2),d(S,n,E,.2),i(j,p,n,.3,1.35,.4,.5),i(v,u,n,1.3,1.45,.4,.9),i(S,I,n,.3,1.1,.3,1),l<n&&l>0){let e=0;const t=.6*n,o=.15*n;l>=o&&l<t?e=1-(l-o)/(t-o):l<o&&(e=1),h.style.opacity=e,g.style.opacity=e}B.style.opacity=e>.5*-n&&e<.4*n?0:1}))})(),(d=>{const i=document.getElementById("js-audio");document.getElementById("js-contact-form").addEventListener("submit",c),document.getElementById("js-play-text").addEventListener("click",t),document.getElementById("js-top-play").addEventListener("click",t),document.getElementById("js-top-play").addEventListener("dblclick",n),document.getElementById("js-play").addEventListener("click",t),document.getElementById("js-top-visualizer").addEventListener("click",o),document.getElementById("js-pause").addEventListener("click",o),document.getElementById("js-ff").addEventListener("click",n),document.getElementById("js-vynil").addEventListener("click",s),document.getElementById("js-visualizer").addEventListener("click",s),document.getElementById("js-skip-intro").addEventListener("click",(e=>{e.preventDefault(),l()})),"undefined"!==document.visibilityState&&document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&e?(localStorage.setItem("resume","true"),location.reload()):"visible"===document.visibilityState&&"true"===localStorage.getItem("resume")&&(l(),i.src=SONG_LIST[++SONG_TRACK].path,localStorage.setItem("resume","false"))})),i.addEventListener("ended",(()=>{SONG_TRACK++,SONG_TRACK===SONG_LIST.length&&(SONG_TRACK=0),i.src=SONG_LIST[SONG_TRACK].path,i.play()})),document.getElementById("js-body-inner").addEventListener("click",(e=>{e.preventDefault()}))})()})()})();
//# sourceMappingURL=index copy.fe609db2bbb66f7de880.bundle.js.map